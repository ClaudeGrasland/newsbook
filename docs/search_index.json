[
["data-rss.html", "Chapter 8 Collection of rss Introduction 8.1 The example of RSS from Le Monde 8.2 Cleaning the html code in description file 8.3 Transformation in quanteda corpus 8.4 Storage or exportation", " Chapter 8 Collection of rss Introduction You have different ways to get RSS of news but in anay case you have a lot of work to do on the data before to obtain a table with the different fields include in the initial XML code. We don’t develop here this part and we suppose that your RSS file has yet been parsed and are stored as a classical data.frame with various columns 8.1 The example of RSS from Le Monde The RSS flows has been here stored by the Media Cloud but can not vbe download directly on the website (which provide only the title). Here, we have obtained the same fields than before plus a field of description which provide some sentences about the content of the news. ## tibble [110,937 x 8] (S3: tbl_df/tbl/data.frame) ## $ stories_id : num [1:110937] 1.59e+09 1.59e+09 1.23e+09 1.39e+09 1.22e+09 ... ## $ title : chr [1:110937] &quot;Les armes de Renault pour se préserver d’une crise de liquidités&quot; &quot;Au Brésil, la démission de Sergio Moro ébranle le pouvoir&quot; &quot;Donald Trump reçoit le président brésilien, Bolsonaro, un de ses plus fervents admirateurs&quot; &quot;Se loger, s’engager : chez les étudiants, de nouvelles formes d’habitat solidaire&quot; ... ## $ url : chr [1:110937] &quot;https://www.lemonde.fr/economie/article/2020/04/23/les-armes-de-renault-pour-se-preserver-d-une-crise-de-liquid&quot;| __truncated__ &quot;https://www.lemonde.fr/international/article/2020/04/25/au-bresil-la-demission-de-sergio-moro-ebranle-le-pouvoi&quot;| __truncated__ &quot;https://www.lemonde.fr/international/article/2019/03/19/donald-trump-recoit-le-president-bresilien-bolsonaro-un&quot;| __truncated__ &quot;https://www.lemonde.fr/campus/article/2019/09/13/se-loger-s-engager-chez-les-etudiants-de-nouvelles-formes-d-ha&quot;| __truncated__ ... ## $ publish_date: POSIXct[1:110937], format: &quot;2020-04-23 12:38:37&quot; &quot;2020-04-24 23:40:01&quot; ... ## $ media_id : num [1:110937] 39072 39072 39072 39072 39072 ... ## $ media_name : chr [1:110937] &quot;Le Monde&quot; &quot;Le Monde&quot; &quot;Le Monde&quot; &quot;Le Monde&quot; ... ## $ media_url : chr [1:110937] &quot;http://www.lemonde.fr/&quot; &quot;http://www.lemonde.fr/&quot; &quot;http://www.lemonde.fr/&quot; &quot;http://www.lemonde.fr/&quot; ... ## $ description : chr [1:110937] &quot;Clotilde Delbos, directrice générale (DG) par interim du groupe Renault depuis cet automne, le 14 février, à B&quot;| __truncated__ &quot;L’ancien ministre brésilien de la justice Sergio Moro à Brasilia le 24 avril.&quot; &quot;C’est d’ailleurs le premier voyage du président brésilien à l’étranger pour une rencontre bilatérale depuis qu’&quot;| __truncated__ &quot;A Lille ou en région parisienne, en individuel ou en colocation, des logements supervisés par des associations &quot;| __truncated__ ... We can recognize many variables from our first example of download of title from Mediacloud. But with a new field called description that add more or less text, depending of the media under investigation. 8.2 Cleaning the html code in description file We have generally a high risk to find html codes in the description field which are not of prior interest for textual analysis. The problem is clearly present in our example : Therefore, we can proceed to an immediate cleaning through a function. One of the most simple one is proposed below, but can be further completed for specific situation. ## [1] &quot;Clotilde Delbos, directrice générale (DG) par interim du groupe Renault depuis cet automne, le 14 février, à Boulogne-Billancourt (Hauts-de-Seine).&quot; ## [2] &quot;L’ancien ministre brésilien de la justice Sergio Moro à Brasilia le 24 avril.&quot; ## [1] NA NA 8.3 Transformation in quanteda corpus It is not necessary a good idea to merge the title and the description in the same text. We strongly sugegst to delay this operation that can be easily done letter. As the Quanteda format offers only one slot for the text, we put the description in this place and add the title in the metadata fields # Create Quanteda corpus qd&lt;-corpus(df$description) ## Add id qd$id&lt;-df$stories_id ## Add source code qd$source&lt;-&quot;lmonde&quot; # Add date qd$date&lt;-df$publish_date # add language qd$lang&lt;-&quot;fr&quot; # add_url qd$url&lt;-df$url # add title qd$title&lt;-df$title # Add global meta meta(qd,&quot;meta_source&quot;)&lt;-&quot;Media Cloud - Special extraction&quot; meta(qd,&quot;meta_time&quot;)&lt;-&quot;Received the 11 July 2020&quot; meta(qd,&quot;meta_author&quot;)&lt;-&quot;Elaborated by Claude Grasland&quot; We have created a quanteda object with a lot of information stored in various fields. The structure of the object is the following one str(qd) ## &#39;corpus&#39; Named chr [1:110937] &quot;Clotilde Delbos, directrice générale (DG) par interim du groupe Renault depuis cet automne, le 14 février, à B&quot;| __truncated__ ... ## - attr(*, &quot;names&quot;)= chr [1:110937] &quot;text1&quot; &quot;text2&quot; &quot;text3&quot; &quot;text4&quot; ... ## - attr(*, &quot;docvars&quot;)=&#39;data.frame&#39;: 110937 obs. of 9 variables: ## ..$ docname_: chr [1:110937] &quot;text1&quot; &quot;text2&quot; &quot;text3&quot; &quot;text4&quot; ... ## ..$ docid_ : Factor w/ 110937 levels &quot;text1&quot;,&quot;text2&quot;,..: 1 2 3 4 5 6 7 8 9 10 ... ## ..$ segid_ : int [1:110937] 1 1 1 1 1 1 1 1 1 1 ... ## ..$ id : num [1:110937] 1.59e+09 1.59e+09 1.23e+09 1.39e+09 1.22e+09 ... ## ..$ source : chr [1:110937] &quot;lmonde&quot; &quot;lmonde&quot; &quot;lmonde&quot; &quot;lmonde&quot; ... ## ..$ date : POSIXct[1:110937], format: &quot;2020-04-23 12:38:37&quot; &quot;2020-04-24 23:40:01&quot; ... ## ..$ lang : chr [1:110937] &quot;fr&quot; &quot;fr&quot; &quot;fr&quot; &quot;fr&quot; ... ## ..$ url : chr [1:110937] &quot;https://www.lemonde.fr/economie/article/2020/04/23/les-armes-de-renault-pour-se-preserver-d-une-crise-de-liquid&quot;| __truncated__ &quot;https://www.lemonde.fr/international/article/2020/04/25/au-bresil-la-demission-de-sergio-moro-ebranle-le-pouvoi&quot;| __truncated__ &quot;https://www.lemonde.fr/international/article/2019/03/19/donald-trump-recoit-le-president-bresilien-bolsonaro-un&quot;| __truncated__ &quot;https://www.lemonde.fr/campus/article/2019/09/13/se-loger-s-engager-chez-les-etudiants-de-nouvelles-formes-d-ha&quot;| __truncated__ ... ## ..$ title : chr [1:110937] &quot;Les armes de Renault pour se préserver d’une crise de liquidités&quot; &quot;Au Brésil, la démission de Sergio Moro ébranle le pouvoir&quot; &quot;Donald Trump reçoit le président brésilien, Bolsonaro, un de ses plus fervents admirateurs&quot; &quot;Se loger, s’engager : chez les étudiants, de nouvelles formes d’habitat solidaire&quot; ... ## - attr(*, &quot;meta&quot;)=List of 3 ## ..$ system:List of 5 ## .. ..$ package-version:Classes &#39;package_version&#39;, &#39;numeric_version&#39; hidden list of 1 ## .. .. ..$ : int [1:3] 2 1 0 ## .. ..$ r-version :Classes &#39;R_system_version&#39;, &#39;package_version&#39;, &#39;numeric_version&#39; hidden list of 1 ## .. .. ..$ : int [1:3] 4 0 2 ## .. ..$ system : Named chr [1:3] &quot;Windows&quot; &quot;x86-64&quot; &quot;CIST&quot; ## .. .. ..- attr(*, &quot;names&quot;)= chr [1:3] &quot;sysname&quot; &quot;machine&quot; &quot;user&quot; ## .. ..$ directory : chr &quot;C:/claude/git/newsbook&quot; ## .. ..$ created : Date[1:1], format: &quot;2020-07-10&quot; ## ..$ object:List of 2 ## .. ..$ unit : chr &quot;documents&quot; ## .. ..$ summary:List of 2 ## .. .. ..$ hash: chr(0) ## .. .. ..$ data: NULL ## ..$ user :List of 3 ## .. ..$ meta_source: chr &quot;Media Cloud - Special extraction&quot; ## .. ..$ meta_time : chr &quot;Received the 11 July 2020&quot; ## .. ..$ meta_author: chr &quot;Elaborated by Claude Grasland&quot; We can look at the first titles with head() kable(head(qd,3)) x text1 Clotilde Delbos, directrice générale (DG) par interim du groupe Renault depuis cet automne, le 14 février, à Boulogne-Billancourt (Hauts-de-Seine). text2 L’ancien ministre brésilien de la justice Sergio Moro à Brasilia le 24 avril. text3 C’est d’ailleurs le premier voyage du président brésilien à l’étranger pour une rencontre bilatérale depuis qu’il a pris ses fonctions, le 1er janvier. We can get meta information on each stories with summary() summary(qd,3) ## Corpus consisting of 110937 documents, showing 3 documents: ## ## Text Types Tokens Sentences id source date lang ## text1 23 27 1 1587014178 lmonde 2020-04-23 12:38:37 fr ## text2 14 14 1 1588395074 lmonde 2020-04-24 23:40:01 fr ## text3 24 25 1 1227958549 lmonde 2019-03-19 04:11:48 fr ## url ## https://www.lemonde.fr/economie/article/2020/04/23/les-armes-de-renault-pour-se-preserver-d-une-crise-de-liquidites_6037564_3234.html ## https://www.lemonde.fr/international/article/2020/04/25/au-bresil-la-demission-de-sergio-moro-ebranle-le-pouvoir_6037726_3210.html ## https://www.lemonde.fr/international/article/2019/03/19/donald-trump-recoit-le-president-bresilien-bolsonaro-un-de-ses-plus-fervents-admirateurs_5438113_3210.html?xtor=RSS-3208 ## title ## Les armes de Renault pour se préserver d’une crise de liquidités ## Au Brésil, la démission de Sergio Moro ébranle le pouvoir ## Donald Trump reçoit le président brésilien, Bolsonaro, un de ses plus fervents admirateurs We can get meta information about the full document meta(qd) ## $meta_source ## [1] &quot;Media Cloud - Special extraction&quot; ## ## $meta_time ## [1] &quot;Received the 11 July 2020&quot; ## ## $meta_author ## [1] &quot;Elaborated by Claude Grasland&quot; 8.4 Storage or exportation We can finally save the object in .Rdata format in a directory dedicated to our quanteda files. It can be usefull to give some information in the name of the file saveRDS(qd,&quot;_data/qd/fr_FRA_lmonde_2013_2020.Rdata&quot;) "]
]
