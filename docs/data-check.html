<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Data Check and Clean | The R News Book</title>
  <meta name="description" content="This is a summary of experience and methods developped for the analysis of news flow." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Data Check and Clean | The R News Book" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a summary of experience and methods developped for the analysis of news flow." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Data Check and Clean | The R News Book" />
  
  <meta name="twitter:description" content="This is a summary of experience and methods developped for the analysis of news flow." />
  

<meta name="author" content="Claude Grasland, Romain Leconte, Hugues Pecout, Etienne Toureille, …" />


<meta name="date" content="2020-07-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-collect.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">My Book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Objectives</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="data-collect.html"><a href="data-collect.html"><i class="fa fa-check"></i><b>3</b> Data collection</a><ul>
<li class="chapter" data-level="3.1" data-path="data-collect.html"><a href="data-collect.html#data-level-1-title-of-news"><i class="fa fa-check"></i><b>3.1</b> DATA LEVEL 1 : Title of news</a><ul>
<li class="chapter" data-level="3.1.1" data-path="data-collect.html"><a href="data-collect.html#download-titles-with-mediacloud-interface"><i class="fa fa-check"></i><b>3.1.1</b> Download titles with mediacloud interface</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-collect.html"><a href="data-collect.html#transformation-and-storage-in-quanteda-format."><i class="fa fa-check"></i><b>3.1.2</b> Transformation and storage in quanteda format.</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-collect.html"><a href="data-collect.html#data-level-2-title-of-news-description"><i class="fa fa-check"></i><b>3.2</b> DATA LEVEL 2 : Title of news + description</a><ul>
<li class="chapter" data-level="3.2.1" data-path="data-collect.html"><a href="data-collect.html#metadata"><i class="fa fa-check"></i><b>3.2.1</b> metadata</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-collect.html"><a href="data-collect.html#load-.csv-file"><i class="fa fa-check"></i><b>3.2.2</b> Load .csv file</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-collect.html"><a href="data-collect.html#cleaning-the-html-code-in-description-file"><i class="fa fa-check"></i><b>3.2.3</b> Cleaning the html code in description file</a></li>
<li class="chapter" data-level="3.2.4" data-path="data-collect.html"><a href="data-collect.html#transformation-of-textdescription-in-quanteda-corpus"><i class="fa fa-check"></i><b>3.2.4</b> Transformation of text+description in quanteda corpus</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-collect.html"><a href="data-collect.html#data-level-3-full-text"><i class="fa fa-check"></i><b>3.3</b> DATA LEVEL 3 : Full text</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-check.html"><a href="data-check.html"><i class="fa fa-check"></i><b>4</b> Data Check and Clean</a><ul>
<li class="chapter" data-level="4.1" data-path="data-check.html"><a href="data-check.html#prerequites-quanteda-or-tidytext"><i class="fa fa-check"></i><b>4.1</b> Prerequites : quanteda (or tidytext)</a></li>
<li class="chapter" data-level="4.2" data-path="data-check.html"><a href="data-check.html#check-1-length-of-texts"><i class="fa fa-check"></i><b>4.2</b> CHECK 1 : length of texts</a><ul>
<li class="chapter" data-level="4.2.1" data-path="data-check.html"><a href="data-check.html#number-of-sentences"><i class="fa fa-check"></i><b>4.2.1</b> Number of sentences</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-check.html"><a href="data-check.html#number-of-tokens"><i class="fa fa-check"></i><b>4.2.2</b> Number of tokens</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-check.html"><a href="data-check.html#check-2-time-distribution"><i class="fa fa-check"></i><b>4.3</b> CHECK 2 : Time distribution</a><ul>
<li class="chapter" data-level="4.3.1" data-path="data-check.html"><a href="data-check.html#news-without-date"><i class="fa fa-check"></i><b>4.3.1</b> News without date</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-check.html"><a href="data-check.html#distribution-of-news-through-time"><i class="fa fa-check"></i><b>4.3.2</b> Distribution of news through time</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-check.html"><a href="data-check.html#check-3-suspect-words"><i class="fa fa-check"></i><b>4.4</b> CHECK 3 : Suspect words</a><ul>
<li class="chapter" data-level="4.4.1" data-path="data-check.html"><a href="data-check.html#tips-1-simple-word-fequencies"><i class="fa fa-check"></i><b>4.4.1</b> Tips 1 : simple word fequencies</a></li>
<li class="chapter" data-level="4.4.2" data-path="data-check.html"><a href="data-check.html#tips-2-most-frequent-n-grams"><i class="fa fa-check"></i><b>4.4.2</b> Tips 2 : most frequent n-grams</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data-check.html"><a href="data-check.html#check-4-human-expertise"><i class="fa fa-check"></i><b>4.5</b> CHECK 4 : Human expertise</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/ClaudeGrasland/newsbook" target="blank"></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The R News Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data_check" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Data Check and Clean</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data-check.html#cb1-1"></a><span class="kw">library</span>(knitr)</span>
<span id="cb1-2"><a href="data-check.html#cb1-2"></a>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">echo =</span> <span class="ot">TRUE</span>, <span class="dt">warning =</span> <span class="ot">FALSE</span>, <span class="dt">message =</span> <span class="ot">FALSE</span>)</span>
<span id="cb1-3"><a href="data-check.html#cb1-3"></a><span class="kw">library</span>(quanteda)</span>
<span id="cb1-4"><a href="data-check.html#cb1-4"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb1-5"><a href="data-check.html#cb1-5"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb1-6"><a href="data-check.html#cb1-6"></a><span class="kw">library</span>(tidytext)</span></code></pre></div>
<p>In this chapter, we describe the different operation of checking and cleaning that should be necessarily realized before any sound exploration of corpus. The majority of the procedures described here can not be done automatically and implies a human expertise at each step in order to control the results and propose remediations in case of problems.</p>
<div id="prerequites-quanteda-or-tidytext" class="section level2">
<h2><span class="header-section-number">4.1</span> Prerequites : quanteda (or tidytext)</h2>
<p>The operations will be realized jointly with the two packages <strong>quanteda</strong> and <strong>tidytext</strong>. In the majority of case, we will use quanteda but in some specific situations tidytext will appear more adapted and will be used, thanks to (relatively) easy possibilities of exchange between the two format of dta storage of corpora.</p>
<ul>
<li>The reader non familiar with quanteda should have a look at <em>Quick Start</em> available on the website of the project :</li>
</ul>
<p><a href="https://quanteda.io/articles/quickstart.html" class="uri">https://quanteda.io/articles/quickstart.html</a></p>
<ul>
<li>The reader non familiar with tidytext will find detailed explnation in the following book :</li>
</ul>
<p><a href="https://www.tidytextmining.com/" class="uri">https://www.tidytextmining.com/</a></p>
<p>We start by loading the corpus of news from the french newspaper Sud-Ouest that has been extract from .csv and transform in quanteda corpus in the previous chapter (<strong>ref</strong>). we also transform the time variable in date and sort the news by historical order.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="data-check.html#cb2-1"></a>qd&lt;-<span class="kw">readRDS</span>(<span class="st">&quot;_data/qd/stories_41372.Rdata&quot;</span>)</span>
<span id="cb2-2"><a href="data-check.html#cb2-2"></a>qd<span class="op">$</span>date&lt;-<span class="kw">as.Date</span>(qd<span class="op">$</span>date)</span>
<span id="cb2-3"><a href="data-check.html#cb2-3"></a>qd&lt;-qd[<span class="kw">order</span>(qd<span class="op">$</span>date)]</span>
<span id="cb2-4"><a href="data-check.html#cb2-4"></a><span class="kw">str</span>(qd)</span></code></pre></div>
<pre><code>##  &#39;corpus&#39; Named chr [1:81653] &quot;« Sud Ouest » : Pierre Veilletet est mort.\n.&quot; ...
##  - attr(*, &quot;names&quot;)= chr [1:81653] &quot;text66408&quot; &quot;text77986&quot; &quot;text78223&quot; &quot;text66409&quot; ...
##  - attr(*, &quot;docvars&quot;)=&#39;data.frame&#39;:  81653 obs. of  4 variables:
##   ..$ docname_: chr [1:81653] &quot;text66408&quot; &quot;text77986&quot; &quot;text78223&quot; &quot;text66409&quot; ...
##   ..$ docid_  : Factor w/ 81653 levels &quot;text1&quot;,&quot;text2&quot;,..: 66408 77986 78223 66409 2245 55308 23528 70312 63946 64 ...
##   ..$ segid_  : int [1:81653] 1 1 1 1 1 1 1 1 1 1 ...
##   ..$ date    : Date[1:81653], format: &quot;2013-01-08&quot; &quot;2013-01-10&quot; ...
##  - attr(*, &quot;meta&quot;)=List of 3
##   ..$ system:List of 5
##   .. ..$ package-version:Classes &#39;package_version&#39;, &#39;numeric_version&#39;  hidden list of 1
##   .. .. ..$ : int [1:3] 2 1 0
##   .. ..$ r-version      :Classes &#39;R_system_version&#39;, &#39;package_version&#39;, &#39;numeric_version&#39;  hidden list of 1
##   .. .. ..$ : int [1:3] 4 0 2
##   .. ..$ system         : Named chr [1:3] &quot;Windows&quot; &quot;x86-64&quot; &quot;CIST&quot;
##   .. .. ..- attr(*, &quot;names&quot;)= chr [1:3] &quot;sysname&quot; &quot;machine&quot; &quot;user&quot;
##   .. ..$ directory      : chr &quot;C:/claude/git/newsbook&quot;
##   .. ..$ created        : Date[1:1], format: &quot;2020-07-08&quot;
##   ..$ object:List of 1
##   .. ..$ unit: chr &quot;documents&quot;
##   ..$ user  :List of 7
##   .. ..$ media_id     : int 41372
##   .. ..$ media_name   : chr &quot;Sud Ouest&quot;
##   .. ..$ media_url    : chr &quot;http://www.sudouest.fr/&quot;
##   .. ..$ media_country: chr &quot;FRA&quot;
##   .. ..$ data_source  : chr &quot;Media Cloud &quot;
##   .. ..$ data_time    : chr &quot;Special extraction&quot;
##   .. ..$ data_author  : chr &quot;Elaborated by Claude Grasland&quot;</code></pre>
<p>This structure of data appears a bit tricky at first glance (especially for old user of quanteda that has experimented modification between version 1 and 2 …) but it offers very good guaranties of quality and efficiency. As explained by the author of the quanteda package :</p>
<blockquote>
<p>A corpus is designed to be a “library” of original documents that have been converted to plain, UTF-8 encoded text, and stored along with meta-data at the corpus level and at the document-level. We have a special name for document-level meta-data: <em>docvars</em>. These are variables or features that describe attributes of each document.A corpus is designed to be a more or less static container of texts with respect to processing and analysis. This means that the texts in corpus are not designed to be changed internally through (for example) cleaning or pre-processing steps, such as stemming or removing punctuation. Rather, texts can be extracted from the corpus as part of processing, and assigned to new objects, but the idea is that the corpus will remain as an original reference copy so that other analyses – for instance those in which stems and punctuation were required, such as analyzing a reading ease index – can be performed on the same corpus.</p>
</blockquote>
<p>With the new data structure it is for example easy to extract a specific text from the corpus with an extractor, called <code>texts()</code>. We can also have an easy access to information associated to each document like the date in our example. For example the news 666 is defined by :</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data-check.html#cb4-1"></a><span class="kw">texts</span>(qd)[<span class="dv">666</span>]</span></code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                                                                                                                                                                      text49394 
## &quot;Béarn : un technicien électrocuté par une ligne à 63 000 volts.\n.Le technicien, qui était sur une nacelle, aurait été victime d’un arc électrique. La police a ouvert une enquête.Un dramatique accident s’est produit jeudi après-midi vers 16 h 30 sur le site Euralis à Lescar. Un homme est mort électrocuté alors qu’il travaillait sur une nacelle à une dizaine de mètres du sol, à... Lire la suite&quot;</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="data-check.html#cb6-1"></a>qd<span class="op">$</span>date[<span class="dv">666</span>]</span></code></pre></div>
<pre><code>## [1] &quot;2013-04-19&quot;</code></pre>
<p>For those who really don’t want to use quanteda, it is also simple to convert it to other format and in particular a simple data.frame where we can find only the id of document, the text and the document level information. But we have lost all the other information like the document metadata.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data-check.html#cb8-1"></a>df&lt;-<span class="kw">convert</span>(qd, <span class="dt">to=</span><span class="st">&quot;data.frame&quot;</span>)</span>
<span id="cb8-2"><a href="data-check.html#cb8-2"></a><span class="kw">head</span>(df)</span></code></pre></div>
<pre><code>##      doc_id
## 1 text66408
## 2 text77986
## 3 text78223
## 4 text66409
## 5  text2245
## 6 text55308
##                                                                          text
## 1                               « Sud Ouest » : Pierre Veilletet est mort.\n.
## 2                       Municipales à Pau : Bayrou entretient le suspense.\n.
## 3 Algérie : Yann Desjeux, l’otage originaire du Pays basque, tué vendredi.\n.
## 4     Bègles : il avait conçu et réalisé le dernier album d’Yvette Horner.\n.
## 5                                    Le football pleure Jacques Grimonpon.\n.
## 6                             Mariage pour tous : Jean Lassalle a dit non.\n.
##         date
## 1 2013-01-08
## 2 2013-01-10
## 3 2013-01-18
## 4 2013-01-20
## 5 2013-01-25
## 6 2013-02-12</code></pre>
</div>
<div id="check-1-length-of-texts" class="section level2">
<h2><span class="header-section-number">4.2</span> CHECK 1 : length of texts</h2>
<p>We can use the summary command applied to the whole corpus in order to obtain for each text the number of sentences and words. This operation can take some time because quanteda will proceed to a tokenization of the corpus. We suggest to store this information in the quanteda object.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data-check.html#cb10-1"></a><span class="co"># Compute number of sentences and tokens</span></span>
<span id="cb10-2"><a href="data-check.html#cb10-2"></a>tokeninfo &lt;-<span class="st"> </span><span class="kw">summary</span>(qd,<span class="kw">length</span>(qd))</span>
<span id="cb10-3"><a href="data-check.html#cb10-3"></a></span>
<span id="cb10-4"><a href="data-check.html#cb10-4"></a><span class="co">#store in quanteda object</span></span>
<span id="cb10-5"><a href="data-check.html#cb10-5"></a><span class="kw">docvars</span>(qd, <span class="dt">field=</span><span class="st">&quot;Tokens&quot;</span>)&lt;-tokeninfo<span class="op">$</span>Tokens</span>
<span id="cb10-6"><a href="data-check.html#cb10-6"></a><span class="kw">docvars</span>(qd, <span class="dt">field=</span><span class="st">&quot;Sentences&quot;</span>)&lt;-tokeninfo<span class="op">$</span>Sentences</span>
<span id="cb10-7"><a href="data-check.html#cb10-7"></a></span>
<span id="cb10-8"><a href="data-check.html#cb10-8"></a><span class="co"># Visualize</span></span>
<span id="cb10-9"><a href="data-check.html#cb10-9"></a><span class="kw">head</span>(<span class="kw">docvars</span>(qd))</span></code></pre></div>
<pre><code>##         date Tokens Sentences
## 1 2013-01-08     11         1
## 2 2013-01-10     10         1
## 3 2013-01-18     15         1
## 4 2013-01-20     14         1
## 5 2013-01-25      7         1
## 6 2013-02-12     11         1</code></pre>
<div id="number-of-sentences" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Number of sentences</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="data-check.html#cb12-1"></a>x&lt;-qd<span class="op">$</span>Sentences</span>
<span id="cb12-2"><a href="data-check.html#cb12-2"></a></span>
<span id="cb12-3"><a href="data-check.html#cb12-3"></a><span class="kw">kable</span>(<span class="kw">table</span>(x),<span class="dt">caption =</span> <span class="st">&quot;Number of sentences of news&quot;</span>, <span class="dt">digits=</span><span class="dv">1</span>) </span></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-7">Table 4.1: </span>Number of sentences of news</caption>
<thead>
<tr class="header">
<th align="left">x</th>
<th align="right">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">1950</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">287</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="right">12772</td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="right">30262</td>
</tr>
<tr class="odd">
<td align="left">5</td>
<td align="right">23324</td>
</tr>
<tr class="even">
<td align="left">6</td>
<td align="right">9578</td>
</tr>
<tr class="odd">
<td align="left">7</td>
<td align="right">2719</td>
</tr>
<tr class="even">
<td align="left">8</td>
<td align="right">568</td>
</tr>
<tr class="odd">
<td align="left">9</td>
<td align="right">141</td>
</tr>
<tr class="even">
<td align="left">10</td>
<td align="right">37</td>
</tr>
<tr class="odd">
<td align="left">11</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">12</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">18</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">57</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p>The distribution appears regular with the exception of a very strange news with 57 sentences. It appears as a single case of full text ! We decide therefore to eliminate all texts with length &gt; 10 sentences and visualize the result.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data-check.html#cb13-1"></a>qd&lt;-qd[qd<span class="op">$</span>Sentences<span class="op">&lt;</span><span class="dv">11</span>]</span>
<span id="cb13-2"><a href="data-check.html#cb13-2"></a>p&lt;-<span class="kw">ggplot</span>(<span class="kw">docvars</span>(qd),<span class="kw">aes</span>(<span class="dt">x=</span>Sentences))<span class="op">+</span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&quot;count&quot;</span>,)</span>
<span id="cb13-3"><a href="data-check.html#cb13-3"></a>p</span></code></pre></div>
<p><img src="newsbook_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>N.B. At this point, it is also possible to harmonize the number of sentences in the datasets.But rather than deleting the “long” texts", it appears better to keep only the k first sentences of each text with the <em>corpus_reshape</em> function. This function can transform the initial text in sentences but also do the reverse operation. So, our program could look like this. Note that the operation can take some time on large corpora.</p>
</div>
<div id="number-of-tokens" class="section level3">
<h3><span class="header-section-number">4.2.2</span> Number of tokens</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data-check.html#cb14-1"></a>nbtoks&lt;-qd<span class="op">$</span>Tokens</span>
<span id="cb14-2"><a href="data-check.html#cb14-2"></a>p&lt;-<span class="kw">ggplot</span>(<span class="kw">docvars</span>(qd),<span class="kw">aes</span>(<span class="dt">x=</span>Tokens))<span class="op">+</span><span class="kw">geom_histogram</span>()</span>
<span id="cb14-3"><a href="data-check.html#cb14-3"></a>p</span></code></pre></div>
<p><img src="newsbook_files/figure-html/unnamed-chunk-9-1.png" width="672" />
One more time, we observe some strange behavior with some very short news. We can therefore decide to harmonize and keep only the news with a value of 50 to 125 tokens.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="data-check.html#cb15-1"></a>qd&lt;-<span class="kw">corpus_subset</span>(qd,Tokens<span class="op">&gt;</span><span class="dv">50</span>)</span>
<span id="cb15-2"><a href="data-check.html#cb15-2"></a>qd&lt;-<span class="kw">corpus_subset</span>(qd,Tokens<span class="op">&lt;</span><span class="dv">125</span>)</span>
<span id="cb15-3"><a href="data-check.html#cb15-3"></a></span>
<span id="cb15-4"><a href="data-check.html#cb15-4"></a>p&lt;-<span class="kw">ggplot</span>(<span class="kw">docvars</span>(qd),<span class="kw">aes</span>(<span class="dt">x=</span>Tokens))<span class="op">+</span><span class="kw">geom_histogram</span>(<span class="dt">stat_bin=</span><span class="dv">25</span>)</span>
<span id="cb15-5"><a href="data-check.html#cb15-5"></a>p</span></code></pre></div>
<p><img src="newsbook_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
</div>
</div>
<div id="check-2-time-distribution" class="section level2">
<h2><span class="header-section-number">4.3</span> CHECK 2 : Time distribution</h2>
<p>The second step is to verify the stability of the news through times, in terms of frequencies. The main danger here is the risk to observe discontinuities in the distribution which could induce biases in the comparison of evolution through time.</p>
<div id="news-without-date" class="section level3">
<h3><span class="header-section-number">4.3.1</span> News without date</h3>
<p>After a check of the time distribution of news, we eliminate the news without date</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data-check.html#cb16-1"></a><span class="kw">summary</span>(<span class="kw">docvars</span>(qd,<span class="st">&quot;date&quot;</span>))</span></code></pre></div>
<pre><code>##         Min.      1st Qu.       Median         Mean      3rd Qu.         Max. 
## &quot;2013-03-18&quot; &quot;2015-06-23&quot; &quot;2017-06-12&quot; &quot;2017-02-11&quot; &quot;2018-10-24&quot; &quot;2019-12-31&quot; 
##         NA&#39;s 
##          &quot;9&quot;</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="data-check.html#cb18-1"></a>qd&lt;-qd[<span class="kw">is.na</span>(qd<span class="op">$</span>date)<span class="op">==</span>F]</span></code></pre></div>
</div>
<div id="distribution-of-news-through-time" class="section level3">
<h3><span class="header-section-number">4.3.2</span> Distribution of news through time</h3>
<p>We introduce a function when_count for an easier extraction of time series with different levels of time span. The interest of this function is to add zero value for time period where no news has been observed, which would not be the case with a simple table function.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="data-check.html#cb19-1"></a><span class="co">#### ---------------- when_count -----------------</span></span>
<span id="cb19-2"><a href="data-check.html#cb19-2"></a><span class="co">#&#39; @title identify number of news per time period</span></span>
<span id="cb19-3"><a href="data-check.html#cb19-3"></a><span class="co">#&#39; @name when_count</span></span>
<span id="cb19-4"><a href="data-check.html#cb19-4"></a><span class="co">#&#39; @description count the numbers of news per time period and add zero for missing period</span></span>
<span id="cb19-5"><a href="data-check.html#cb19-5"></a><span class="co">#&#39; @param corpus a corpus of news (in qd format) with a column &quot;time&quot;</span></span>
<span id="cb19-6"><a href="data-check.html#cb19-6"></a><span class="co">#&#39; @param span a time period of aggregation (days, weeks, months, year)</span></span>
<span id="cb19-7"><a href="data-check.html#cb19-7"></a></span>
<span id="cb19-8"><a href="data-check.html#cb19-8"></a></span>
<span id="cb19-9"><a href="data-check.html#cb19-9"></a></span>
<span id="cb19-10"><a href="data-check.html#cb19-10"></a>when_count&lt;-<span class="cf">function</span>(<span class="dt">corpus =</span> qd, <span class="dt">span =</span> <span class="st">&#39;weeks&#39;</span> )</span>
<span id="cb19-11"><a href="data-check.html#cb19-11"></a>{</span>
<span id="cb19-12"><a href="data-check.html#cb19-12"></a> <span class="co"># corpus&lt;-qd</span></span>
<span id="cb19-13"><a href="data-check.html#cb19-13"></a><span class="co">#  span&lt;-&quot;weeks&quot;</span></span>
<span id="cb19-14"><a href="data-check.html#cb19-14"></a></span>
<span id="cb19-15"><a href="data-check.html#cb19-15"></a>  </span>
<span id="cb19-16"><a href="data-check.html#cb19-16"></a>  time&lt;-<span class="kw">docvars</span>(corpus,<span class="st">&quot;date&quot;</span>)</span>
<span id="cb19-17"><a href="data-check.html#cb19-17"></a>  tab&lt;-tibble<span class="op">::</span><span class="kw">tibble</span>(<span class="dt">date=</span><span class="kw">as.Date</span>(time))</span>
<span id="cb19-18"><a href="data-check.html#cb19-18"></a>  item_date &lt;-<span class="st"> </span>tab <span class="op">%&gt;%</span></span>
<span id="cb19-19"><a href="data-check.html#cb19-19"></a><span class="st">    </span><span class="kw">group_by</span>(<span class="dt">date =</span> <span class="kw">cut</span>(date, span, <span class="dt">start.on.monday =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></span>
<span id="cb19-20"><a href="data-check.html#cb19-20"></a><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">nb =</span> <span class="kw">n</span>())</span>
<span id="cb19-21"><a href="data-check.html#cb19-21"></a>  item_date<span class="op">$</span>date &lt;-<span class="st"> </span><span class="kw">as.Date</span>(item_date<span class="op">$</span>date)</span>
<span id="cb19-22"><a href="data-check.html#cb19-22"></a>  all_date&lt;-<span class="kw">data_frame</span>(<span class="dt">date=</span><span class="kw">seq</span>(<span class="kw">min</span>(<span class="kw">as.Date</span>(item_date<span class="op">$</span>date)),<span class="kw">max</span>(<span class="kw">as.Date</span>(item_date<span class="op">$</span>date)),span))</span>
<span id="cb19-23"><a href="data-check.html#cb19-23"></a>  tem_date&lt;-<span class="kw">left_join</span>(all_date,item_date)</span>
<span id="cb19-24"><a href="data-check.html#cb19-24"></a>  item_date<span class="op">$</span>nb[<span class="kw">is.na</span>(item_date<span class="op">$</span>nb)]&lt;-<span class="dv">0</span></span>
<span id="cb19-25"><a href="data-check.html#cb19-25"></a>  </span>
<span id="cb19-26"><a href="data-check.html#cb19-26"></a>  <span class="kw">return</span>(item_date)</span>
<span id="cb19-27"><a href="data-check.html#cb19-27"></a>}</span></code></pre></div>
<div id="daily-distribtion" class="section level4">
<h4><span class="header-section-number">4.3.2.1</span> daily distribtion</h4>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="data-check.html#cb20-1"></a>news_by_day&lt;-<span class="kw">when_count</span>(qd,<span class="dt">span=</span><span class="st">&quot;days&quot;</span>)</span>
<span id="cb20-2"><a href="data-check.html#cb20-2"></a>p&lt;-<span class="kw">ggplot</span>(news_by_day, <span class="kw">aes</span>(<span class="dt">x=</span>date, <span class="dt">y=</span>nb)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>()<span class="op">+</span><span class="st"> </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="kw">max</span>(news_by_day<span class="op">$</span>nb)))</span>
<span id="cb20-3"><a href="data-check.html#cb20-3"></a>p</span></code></pre></div>
<p><img src="newsbook_files/figure-html/news_by_day-1.png" width="672" /></p>
<p>We obtain here a relatively good results with news published every day during the period. But we can also notice a trend of increase of the number of news through time with approx. 20 news/day in 2013 against approx. 40 news per day in 2019.</p>
</div>
<div id="weekly-distribtion" class="section level4">
<h4><span class="header-section-number">4.3.2.2</span> weekly distribtion</h4>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data-check.html#cb21-1"></a>news_by_week&lt;-<span class="kw">when_count</span>(qd,<span class="dt">span=</span><span class="st">&quot;weeks&quot;</span>)</span>
<span id="cb21-2"><a href="data-check.html#cb21-2"></a>p&lt;-<span class="kw">ggplot</span>(news_by_week, <span class="kw">aes</span>(<span class="dt">x=</span>date, <span class="dt">y=</span>nb)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="kw">max</span>(news_by_week<span class="op">$</span>nb)))</span>
<span id="cb21-3"><a href="data-check.html#cb21-3"></a>p</span></code></pre></div>
<p><img src="newsbook_files/figure-html/news_by_week-1.png" width="672" />
The analysis by week reveals only two perturbation of the flow during the week of 5 December 2016 and the final week of december 2019. As a whole (and compare to many other newspapers), these flow appears pretty good !</p>
</div>
</div>
</div>
<div id="check-3-suspect-words" class="section level2">
<h2><span class="header-section-number">4.4</span> CHECK 3 : Suspect words</h2>
<p>A classical problem with the news collected from RSS is the existence of sequence of words that are not related to news itself but to newspaper structure. For example, the systematic addition of a copyright (<em>(c) the Journal</em>) or the introduction of references (<em>See also</em>) and many other things that can be considered as external to the message provided by the news itself. Here they are no miracle solution that can produce an automatic correction. But some technics can help the analyst to simplify the task of correction.</p>
<div id="tips-1-simple-word-fequencies" class="section level3">
<h3><span class="header-section-number">4.4.1</span> Tips 1 : simple word fequencies</h3>
<p>A simple analysis of most frequent tokens can help to discover suspect words.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="data-check.html#cb22-1"></a>toks&lt;-<span class="kw">tokens</span>(qd, <span class="dt">remove_numbers =</span> <span class="ot">TRUE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>, <span class="dt">remove_separators =</span><span class="ot">TRUE</span>)</span>
<span id="cb22-2"><a href="data-check.html#cb22-2"></a>dfm &lt;-<span class="st"> </span><span class="kw">dfm</span>(toks, <span class="dt">remove =</span> <span class="kw">stopwords</span>(<span class="st">&quot;french&quot;</span>))</span>
<span id="cb22-3"><a href="data-check.html#cb22-3"></a>top10&lt;-<span class="kw">textstat_frequency</span>(dfm,<span class="dt">n=</span><span class="dv">10</span>)</span>
<span id="cb22-4"><a href="data-check.html#cb22-4"></a><span class="kw">kable</span>(top10)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">feature</th>
<th align="right">frequency</th>
<th align="right">rank</th>
<th align="right">docfreq</th>
<th align="left">group</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">suite</td>
<td align="right">79775</td>
<td align="right">1</td>
<td align="right">77526</td>
<td align="left">all</td>
</tr>
<tr class="even">
<td align="left">lire</td>
<td align="right">77770</td>
<td align="right">2</td>
<td align="right">77526</td>
<td align="left">all</td>
</tr>
<tr class="odd">
<td align="left">a</td>
<td align="right">71430</td>
<td align="right">3</td>
<td align="right">45400</td>
<td align="left">all</td>
</tr>
<tr class="even">
<td align="left">ans</td>
<td align="right">18841</td>
<td align="right">4</td>
<td align="right">12945</td>
<td align="left">all</td>
</tr>
<tr class="odd">
<td align="left">après</td>
<td align="right">16275</td>
<td align="right">5</td>
<td align="right">13548</td>
<td align="left">all</td>
</tr>
<tr class="even">
<td align="left">plus</td>
<td align="right">15848</td>
<td align="right">6</td>
<td align="right">11928</td>
<td align="left">all</td>
</tr>
<tr class="odd">
<td align="left">france</td>
<td align="right">14308</td>
<td align="right">7</td>
<td align="right">9545</td>
<td align="left">all</td>
</tr>
<tr class="even">
<td align="left">deux</td>
<td align="right">13897</td>
<td align="right">8</td>
<td align="right">9939</td>
<td align="left">all</td>
</tr>
<tr class="odd">
<td align="left">d’un</td>
<td align="right">12290</td>
<td align="right">9</td>
<td align="right">9975</td>
<td align="left">all</td>
</tr>
<tr class="even">
<td align="left">lundi</td>
<td align="right">10647</td>
<td align="right">10</td>
<td align="right">8552</td>
<td align="left">all</td>
</tr>
</tbody>
</table>
<p>The simple examination of the top 10 reveals the existence of two suspect words <em>lire</em> and <em>suite</em>. They can be explained bythe existence of the string <em>… Lire la suite</em> at the end of the majority of news. For example :</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data-check.html#cb23-1"></a><span class="kw">texts</span>(qd)[<span class="dv">34</span>]</span></code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                                                                                                                                                                                    text70739 
## &quot;Drame de Port-Royal : la maternité blanchie par une enquête interne.\n.La mort du foetus n&#39;était pas prévisible et les urgences n&#39;étaient pas saturées, selon les résultats de l&#39;enquête rendus publics.\&quot;Pas d&#39;erreur médicale\&quot;    La maternité de Cochin-Port-Royal a été blanchie par une enquête interne \&quot;exceptionnelle\&quot; diligentée à la suite de la perte de son bébé par une patiente qui avait... Lire la suite&quot;</code></pre>
</div>
<div id="tips-2-most-frequent-n-grams" class="section level3">
<h3><span class="header-section-number">4.4.2</span> Tips 2 : most frequent n-grams</h3>
<p>Another approach consist in the extraction of most frequent n-grams i.e. couples of words frequently associated. This can be done with various value of n. But it is generally sufficient to check for n= 2, 3 or 4.*</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="data-check.html#cb25-1"></a>bigram&lt;-<span class="kw">tokens_ngrams</span>(toks,<span class="dt">n=</span><span class="kw">c</span>(<span class="dv">2</span>))</span>
<span id="cb25-2"><a href="data-check.html#cb25-2"></a>dfm2&lt;-<span class="kw">dfm</span>(bigram)</span>
<span id="cb25-3"><a href="data-check.html#cb25-3"></a>top10&lt;-<span class="kw">textstat_frequency</span>(dfm2,<span class="dt">n=</span><span class="dv">10</span>)</span>
<span id="cb25-4"><a href="data-check.html#cb25-4"></a><span class="kw">kable</span>(top10)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">feature</th>
<th align="right">frequency</th>
<th align="right">rank</th>
<th align="right">docfreq</th>
<th align="left">group</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">la_suite</td>
<td align="right">78165</td>
<td align="right">1</td>
<td align="right">77526</td>
<td align="left">all</td>
</tr>
<tr class="even">
<td align="left">lire_la</td>
<td align="right">77528</td>
<td align="right">2</td>
<td align="right">77526</td>
<td align="left">all</td>
</tr>
<tr class="odd">
<td align="left">de_la</td>
<td align="right">44035</td>
<td align="right">3</td>
<td align="right">30025</td>
<td align="left">all</td>
</tr>
<tr class="even">
<td align="left">à_la</td>
<td align="right">16397</td>
<td align="right">4</td>
<td align="right">13228</td>
<td align="left">all</td>
</tr>
<tr class="odd">
<td align="left">a_été</td>
<td align="right">15775</td>
<td align="right">5</td>
<td align="right">12519</td>
<td align="left">all</td>
</tr>
<tr class="even">
<td align="left">dans_le</td>
<td align="right">12315</td>
<td align="right">6</td>
<td align="right">10187</td>
<td align="left">all</td>
</tr>
<tr class="odd">
<td align="left">de_ans</td>
<td align="right">9415</td>
<td align="right">7</td>
<td align="right">6988</td>
<td align="left">all</td>
</tr>
<tr class="even">
<td align="left">dans_la</td>
<td align="right">8947</td>
<td align="right">8</td>
<td align="right">7564</td>
<td align="left">all</td>
</tr>
<tr class="odd">
<td align="left">sur_la</td>
<td align="right">7316</td>
<td align="right">9</td>
<td align="right">6131</td>
<td align="left">all</td>
</tr>
<tr class="even">
<td align="left">ont_été</td>
<td align="right">7054</td>
<td align="right">10</td>
<td align="right">5923</td>
<td align="left">all</td>
</tr>
</tbody>
</table>
<p>Here, the conclusion is clear concerning our usual suspect. We can therefore proceed to the elimination of the problem with a regular expression</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data-check.html#cb26-1"></a><span class="kw">texts</span>(qd)&lt;-<span class="kw">gsub</span>(<span class="st">&quot;... Lire la suite&quot;</span>, <span class="st">&quot;...&quot;</span>, <span class="kw">texts</span>(qd))</span></code></pre></div>
</div>
</div>
<div id="check-4-human-expertise" class="section level2">
<h2><span class="header-section-number">4.5</span> CHECK 4 : Human expertise</h2>
<p>All the previous check can not replace human expert. Therefore, we strongly suggest to examine a random sample of texts extract from the news in order to have an empirical view on the texts that will be further subject to time consuming analysis. It is certainly not a vaste of time to discover issues early and avoid to replicate the whole work (pity for the climate !).</p>
<p>A random sample of news can be easily extracted with corpus_sample function. Let’s take a sample of 10 here (but 100 would be certainly better)</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="data-check.html#cb27-1"></a>samp&lt;-<span class="kw">corpus_sample</span>(qd,<span class="dt">size=</span><span class="dv">10</span>)</span>
<span id="cb27-2"><a href="data-check.html#cb27-2"></a><span class="kw">texts</span>(samp)</span></code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                                                                                                                                                                                                                                             text37303 
##                                                                    &quot;Orages en Gironde : des vignes touchées par la grêle, \&quot;un visage de désolation\&quot;.\n.L&#39;orage de grêle qui est remonté dans le Nord du département a haché le sud de l&#39;appellation des vins de Blaye, et une grande partie de sa voisine de Bourg. Le Sud Médoc serait aussi touché. .Une heure après le passage de l&#39;orage de grêle en Gironde, Franck Jullion le président de l&#39;appellation \&quot;Blaye Côtes de...&quot; 
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                             text27692 
## &quot;XV de France : \&quot;De la pression comme hier, il n&#39;en ont jamais connu autant\&quot;.\n.\n                                        En marge d&#39;une réunion entre la région Occitanie et France 2023, Bernard Laporte a témoigné sa satisfaction suite à la première victoire des Bleus.                    \&quot;Il n&#39;y a pas de soulagement. Ce n&#39;est pas fini ! Il reste encore trois matchs.\&quot; Bernard Laporte, le président de la FFR, a glissé quelques mots ce dimanche au lendemain de...&quot; 
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                             text67551 
##                                                                      &quot;Deux collisions tramway-voiture ce mardi matin à Bordeaux et Pessac.\n.Dans les deux cas, les dégâts ne sont que matériels.Un accident de la circulation a eu lieu ce mardi matin sur la ligne C du tramway. Une rame est entrée en collision avec une voiture à 8h30, rue Emile-Counord, à Bordeaux. La circulation a été interrompue dans les deux sens jusqu&#39;à 9h30 entre les stations Grand-Parc et Les...&quot; 
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                             text71428 
##                                                                    &quot;\&quot;Tu vois, les chambres à gaz... dommage\&quot; : Dieudonné jugé ce mercredi.\n.L&#39;humoriste et polémiste est jugé pour provocation à la haine raciale après ses propos sur Patrick Cohen en décembre 2013. Il risque un an de prison.Dieudonné est jugé mercredi par le tribunal correctionnel de Paris pour provocation à la haine raciale suite à des propos sur le journaliste de France Inter Patrick Cohen il...&quot; 
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                             text52402 
##                                                                   &quot;Affaire Benalla : durcissement des règles d&#39;octroi des badges à l&#39;Assemblée.\n.Les badges seront désormais visés par le président de l&#39;Assemblée et consultable par une instance collégiale.Le bureau de l&#39;Assemblée nationale a voté mercredi, \&quot;à l&#39;unanimité moins une voix\&quot;, des règles d&#39;attribution plus restrictives des badges pour les membres des cabinets de l&#39;exécutif, selon un communiqué de la...&quot; 
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                             text80256 
##                                                                                &quot;Pays basque : piégées dans leur voiture par la montée des eaux.\n.Une femme de 38 ans et une fillette de 9 ans ont été secourues par les pompiers, dimanche soir, à Cambo-les-Bains.Dimanche, peu avant 22 heures, les pompiers sont intervenus à Cambo-les-Bains pour porter secours aux deux passagères d&#39;un véhicule pris au piège par la montée des eaux.\n\nUne femme de 38 ans ainsi qu&#39;une...&quot; 
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                             text34734 
##                                                    &quot;Les raisons \&quot;accablantes\&quot; qui ont poussé Arnaud Montebourg à licencier Alexandre Benalla.\n.Alexandre Benalla avait travaillé cinq semaines pour Arnaud Montebourg, en 2012, avant d&#39;être licencié pour \&quot;son incapacité à occuper les fonctions exposées du chauffeur personnel du Ministre\&quot;.Alexandre Benalla aurait-il dû être écarté dès le départ par l&#39;Élysée ? C&#39;est la question que pose Arnaud Montebourg, ancien...&quot; 
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                             text26650 
##                                                                 &quot;Gers : accident de car scolaire, 26 collégiens blessés dont 3 très grièvement.\n.La préfecture du Gers a déclenché le plan NOVI (Nombreuses victimes) .Vingt-six collégiens ont été blessés dont trois très grièvement dans un accident entre un car scolaire et une voiture jeudi vers 13 heures sur une route nationale du Gers à Eauze.\n\nLe bus scolaire, qui transportait 45 enfants et 4 accompagnateurs,...&quot; 
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                             text67113 
##    &quot;Trains : trafic très perturbé le 1er janvier, légère amélioration pour jeudi.\n.\n                                        Le mouvement contre la réforme des retraites se poursuit à la SNCF. Un TGV sur 3 et 2 TER sur 10 en Nouvelle-Aquitaine devraient circuler mercredi 1er janvier. Jeudi, la moitié des TGV circulera ainsi que 4 TER sur 10                    Il y a des choses qui ne vont pas changer tout de suite malgré la nouvelle année. Les perturbations de...&quot; 
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                             text77249 
##                                                                     &quot;Girondins : la mère de Samuel Kalu a été libérée par ses ravisseurs au Nigeria.\n.Celle-ci était détenue depuis la semaine dernière par des kidnappeurs qui réclamaient une rançon à la famille du footballeur bordelais.La mère de Samuel Kalu, international de l&#39;équipe nationale nigériane des Super Eagles et joueur des Girondins de Bordeaux, a été libérée après près d&#39;une semaine aux mains de ses...&quot;</code></pre>
<p>The sample appears correct but some corrections could be added. We could for example eliminate the double quotes that will complicate the analysis of text. We could also decide to eliminate the final sentences that are not completed, etc. But it can also be important to keep the text as similar as possible to the initial one and to delay these final check to the next chapter where the data will be focused on a specific question.</p>
<p>The last step here is to store the clean file for further use.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data-check.html#cb29-1"></a><span class="kw">saveRDS</span>(qd, <span class="st">&quot;_data/qd/fr_FRA_sudoue.Rdata&quot;</span>)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-collect.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ClaudeGrasland/newsbook/edit/master/03-data_check.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["newsbook.pdf", "newsbook.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
