<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Identification of a topic | The R News Book</title>
  <meta name="description" content="This is a summary of experience and methods developped for the analysis of news flow." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Identification of a topic | The R News Book" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a summary of experience and methods developped for the analysis of news flow." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Identification of a topic | The R News Book" />
  
  <meta name="twitter:description" content="This is a summary of experience and methods developped for the analysis of news flow." />
  

<meta name="author" content="Claude Grasland, Romain Leconte, Hugues Pecout, Etienne Toureille, …" />


<meta name="date" content="2020-07-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="corpus-example.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">My Book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Foreword</a></li>
<li class="chapter" data-level="1" data-path="object.html"><a href="object.html"><i class="fa fa-check"></i><b>1</b> OBJECTIVES OF THE BOOK</a><ul>
<li class="chapter" data-level="1.1" data-path="object.html"><a href="object.html#a-short-example"><i class="fa fa-check"></i><b>1.1</b> A short example</a></li>
<li class="chapter" data-level="1.2" data-path="object.html"><a href="object.html#the-choice-of-the-topic"><i class="fa fa-check"></i><b>1.2</b> The choice of the topic</a></li>
<li class="chapter" data-level="1.3" data-path="object.html"><a href="object.html#the-formulation-of-hypothesis"><i class="fa fa-check"></i><b>1.3</b> The formulation of hypothesis</a></li>
<li class="chapter" data-level="1.4" data-path="object.html"><a href="object.html#the-field-of-investigation"><i class="fa fa-check"></i><b>1.4</b> The field of investigation</a></li>
<li class="chapter" data-level="1.5" data-path="object.html"><a href="object.html#the-choice-of-the-methods"><i class="fa fa-check"></i><b>1.5</b> The choice of the methods</a></li>
</ul></li>
<li class="part"><span><b>I DATA ACQUISITION</b></span></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a><ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#minimum-requirement"><i class="fa fa-check"></i><b>2.1</b> Minimum requirement</a></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#mediacloud"><i class="fa fa-check"></i><b>2.2</b> Mediacloud</a></li>
<li class="chapter" data-level="2.3" data-path="data-sources.html"><a href="data-sources.html#factiva"><i class="fa fa-check"></i><b>2.3</b> Factiva</a></li>
<li class="chapter" data-level="2.4" data-path="data-sources.html"><a href="data-sources.html#europresse"><i class="fa fa-check"></i><b>2.4</b> Europresse</a></li>
<li class="chapter" data-level="2.5" data-path="data-sources.html"><a href="data-sources.html#others"><i class="fa fa-check"></i><b>2.5</b> Others</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-title.html"><a href="data-title.html"><i class="fa fa-check"></i><b>3</b> Collection of titles</a><ul>
<li class="chapter" data-level="" data-path="data-title.html"><a href="data-title.html#introduction-1"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="3.1" data-path="data-title.html"><a href="data-title.html#extraction-of-data"><i class="fa fa-check"></i><b>3.1</b> Extraction of data</a></li>
<li class="chapter" data-level="3.2" data-path="data-title.html"><a href="data-title.html#transformation-in-quanteda-format."><i class="fa fa-check"></i><b>3.2</b> Transformation in quanteda format.</a></li>
<li class="chapter" data-level="3.3" data-path="data-title.html"><a href="data-title.html#storage-or-exportation"><i class="fa fa-check"></i><b>3.3</b> Storage or exportation</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-rss.html"><a href="data-rss.html"><i class="fa fa-check"></i><b>4</b> Collection of rss</a><ul>
<li class="chapter" data-level="" data-path="data-rss.html"><a href="data-rss.html#introduction-2"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="4.1" data-path="data-rss.html"><a href="data-rss.html#the-example-of-rss-from-le-monde"><i class="fa fa-check"></i><b>4.1</b> The example of RSS from Le Monde</a></li>
<li class="chapter" data-level="4.2" data-path="data-rss.html"><a href="data-rss.html#cleaning-the-html-code-in-description-file"><i class="fa fa-check"></i><b>4.2</b> Cleaning the html code in description file</a></li>
<li class="chapter" data-level="4.3" data-path="data-rss.html"><a href="data-rss.html#transformation-in-quanteda-corpus"><i class="fa fa-check"></i><b>4.3</b> Transformation in quanteda corpus</a></li>
<li class="chapter" data-level="4.4" data-path="data-rss.html"><a href="data-rss.html#storage-or-exportation-1"><i class="fa fa-check"></i><b>4.4</b> Storage or exportation</a></li>
</ul></li>
<li class="part"><span><b>II CORPUS BUILDING</b></span></li>
<li class="chapter" data-level="" data-path="introduction-3.html"><a href="introduction-3.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="5" data-path="corpus-example.html"><a href="corpus-example.html"><i class="fa fa-check"></i><b>5</b> Examples of corpora</a><ul>
<li class="chapter" data-level="5.1" data-path="corpus-example.html"><a href="corpus-example.html#the-geomedia-corpus"><i class="fa fa-check"></i><b>5.1</b> The Geomedia corpus</a><ul>
<li class="chapter" data-level="5.1.1" data-path="corpus-example.html"><a href="corpus-example.html#the-socant-corpus"><i class="fa fa-check"></i><b>5.1.1</b> The socant corpus</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="corpus-example.html"><a href="corpus-example.html#the-gazette-corpus"><i class="fa fa-check"></i><b>5.2</b> The Gazette corpus</a></li>
<li class="chapter" data-level="5.3" data-path="corpus-example.html"><a href="corpus-example.html#the-venice-corpus"><i class="fa fa-check"></i><b>5.3</b> The Venice corpus</a></li>
<li class="chapter" data-level="5.4" data-path="corpus-example.html"><a href="corpus-example.html#the-covid-corpus"><i class="fa fa-check"></i><b>5.4</b> The Covid corpus</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="corpus-tagging.html"><a href="corpus-tagging.html"><i class="fa fa-check"></i><b>6</b> Identification of a topic</a><ul>
<li class="chapter" data-level="" data-path="corpus-tagging.html"><a href="corpus-tagging.html#introduction-4"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="6.1" data-path="corpus-tagging.html"><a href="corpus-tagging.html#preparation-of-the-data"><i class="fa fa-check"></i><b>6.1</b> Preparation of the data</a></li>
<li class="chapter" data-level="6.2" data-path="corpus-tagging.html"><a href="corpus-tagging.html#the-case-of-a-single-topic-earthquake-news"><i class="fa fa-check"></i><b>6.2</b> The case of a single topic (earthquake news)</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/ClaudeGrasland/newsbook" target="blank"></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The R News Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="corpus_tagging" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Identification of a topic</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="corpus-tagging.html#cb1-1"></a><span class="kw">library</span>(quanteda)</span></code></pre></div>
<pre><code>## Package version: 2.0.1</code></pre>
<pre><code>## Parallel computing: 2 of 11 threads used.</code></pre>
<pre><code>## See https://quanteda.io for tutorials and examples.</code></pre>
<pre><code>## 
## Attaching package: &#39;quanteda&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:utils&#39;:
## 
##     View</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="corpus-tagging.html#cb7-1"></a><span class="kw">library</span>(dplyr)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="corpus-tagging.html#cb11-1"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb11-2"><a href="corpus-tagging.html#cb11-2"></a><span class="kw">library</span>(tidytext)</span>
<span id="cb11-3"><a href="corpus-tagging.html#cb11-3"></a><span class="kw">library</span>(knitr)</span></code></pre></div>
<div id="introduction-4" class="section level2 unnumbered">
<h2>Introduction</h2>
<p>In the majority of case, the researcher try to identify news belonging to a specific topic of interest in the whole corpus. This topic of interest can be characterized by a simple level (e.g. does the news speak about earthquakes ?) but it is also possible that the topic of interest is more complex and can be divided in sub-topics (e.g. does the news speak about migrants or refugees or asylum seeker ?). Finally, the topic can be related to a predefined grid with a lot of options, like in the case of the research of geographical tags (e.g. what are the countries mentionned in the news ?).</p>
<p>The important point in all previous situations is the fact that <strong>the topics are defined in advance by the researcher</strong>, which means that we proceed to the analysis in a <strong>deductive way</strong>. An alternative strategy could be to proceed in an <strong>inductive way</strong>, like in the case of lda() and other methods of clustering that do not specify initially what will be the category obtained.</p>
<ul>
<li><strong>Definition of tags :</strong> a tag is an attribute of news resulting from the application of a preconceived grid of analysis, taking the boolean form TRUE of FALSE.</li>
</ul>
</div>
<div id="preparation-of-the-data" class="section level2">
<h2><span class="header-section-number">6.1</span> Preparation of the data</h2>
<p>In this chapter, we will extract a sample of 4 french and belgian newspapers from the corpus <em>socant</em>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="corpus-tagging.html#cb12-1"></a>corp&lt;-<span class="kw">readRDS</span>(<span class="st">&quot;corpora/geomedia/socant.Rdata&quot;</span>)</span>
<span id="cb12-2"><a href="corpus-tagging.html#cb12-2"></a>qd&lt;-corp[<span class="kw">substr</span>(corp<span class="op">$</span>source,<span class="dv">1</span>,<span class="dv">3</span>) <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;FRA&quot;</span>, <span class="st">&quot;BEL&quot;</span>)]</span>
<span id="cb12-3"><a href="corpus-tagging.html#cb12-3"></a><span class="kw">table</span>(qd<span class="op">$</span>source)</span></code></pre></div>
<pre><code>## 
## BEL_derheu BEL_lesoir FRA_figaro FRA_lmonde 
##       5736       7928       8946      15329</code></pre>
<p>We decide to merge title + description in the same filed of text.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="corpus-tagging.html#cb14-1"></a><span class="kw">texts</span>(qd)&lt;-<span class="kw">as.character</span>(<span class="kw">paste</span>(qd<span class="op">$</span>title, <span class="kw">texts</span>(qd), <span class="dt">sep=</span><span class="st">&quot;. &quot;</span>))</span>
<span id="cb14-2"><a href="corpus-tagging.html#cb14-2"></a><span class="kw">summary</span>(qd,<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## Corpus consisting of 37939 documents, showing 3 documents:
## 
##    Text Types Tokens Sentences      id     source                date lang
##   text3    32     41         2 4155316 FRA_lmonde 2015-01-01 00:16:51   fr
##  text57    33     37         2 4155781 FRA_lmonde 2015-01-01 04:17:00   fr
##  text58    33     37         2 4155781 FRA_lmonde 2015-01-01 04:17:00   fr
##                                                                                                                                       url
##  http://www.lemonde.fr/asie-pacifique/article/2014/12/31/au-moins-35-morts-dans-des-bousculades-du-nouvel-an-a-shanghai_4548239_3216.html
##       http://www.lemonde.fr/asie-pacifique/article/2015/01/01/la-coree-du-nord-accepte-le-dialogue-avec-la-coree-du-sud_4548259_3216.html
##       http://www.lemonde.fr/asie-pacifique/article/2015/01/01/la-coree-du-nord-accepte-le-dialogue-avec-la-coree-du-sud_4548259_3216.html
##                                                               title
##  Au moins 35 morts dans une bousculade lors du Nouvel An à Shanghaï
##           La Corée du Nord accepte le dialogue avec la Corée du Sud
##           La Corée du Nord accepte le dialogue avec la Corée du Sud</code></pre>
</div>
<div id="the-case-of-a-single-topic-earthquake-news" class="section level2">
<h2><span class="header-section-number">6.2</span> The case of a single topic (earthquake news)</h2>
<p>We know that two giant earthquakes occured in Nepal in spring 2015 and we want to examine what has been the coverage of this event in our two french newspapers. But we want also more generally to have a look at all the news related to earhquake during the period. As our newspapers are in french language, we have to provide a list of keywords or regular expression associated to the topic in order to define if the tag “QUAKE” can be considered as TRUE or FALSE for each of the news.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="corpus-tagging.html#cb16-1"></a>dico_quake&lt;-<span class="kw">dictionary</span>(<span class="kw">list</span> (<span class="dt">QUAKE =</span> <span class="kw">c</span>(<span class="st">&quot;tremblement de terre&quot;</span>,</span>
<span id="cb16-2"><a href="corpus-tagging.html#cb16-2"></a>                                       <span class="st">&quot;tremblements de terre&quot;</span>,</span>
<span id="cb16-3"><a href="corpus-tagging.html#cb16-3"></a>                                       <span class="st">&quot;IPGP&quot;</span>,</span>
<span id="cb16-4"><a href="corpus-tagging.html#cb16-4"></a>                                       <span class="st">&quot;USGS&quot;</span>,</span>
<span id="cb16-5"><a href="corpus-tagging.html#cb16-5"></a>                                       <span class="st">&quot;séisme*&quot;</span>,</span>
<span id="cb16-6"><a href="corpus-tagging.html#cb16-6"></a>                                       <span class="st">&quot;secousse*&quot;</span>,</span>
<span id="cb16-7"><a href="corpus-tagging.html#cb16-7"></a>                                       <span class="st">&quot;sismique*&quot;</span>,</span>
<span id="cb16-8"><a href="corpus-tagging.html#cb16-8"></a>                                       <span class="st">&quot;richter&quot;</span>,</span>
<span id="cb16-9"><a href="corpus-tagging.html#cb16-9"></a>                                       <span class="st">&quot;tsunami*&quot;</span>)))</span>
<span id="cb16-10"><a href="corpus-tagging.html#cb16-10"></a>dico_quake</span></code></pre></div>
<pre><code>## Dictionary object with 1 key entry.
## - [QUAKE]:
##   - tremblement de terre, tremblements de terre, ipgp, usgs, séisme*, secousse*, sismique*, richter, tsunami*</code></pre>
<p>After tokenization, we can extract the dfm matrix which gives the number of occurences of selected keywords in the news :</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="corpus-tagging.html#cb18-1"></a>tok&lt;-<span class="kw">tokens</span>(qd)</span>
<span id="cb18-2"><a href="corpus-tagging.html#cb18-2"></a>qd<span class="op">$</span>quake_nb&lt;-<span class="kw">as.vector</span>(<span class="kw">dfm</span>(tok, <span class="dt">dictionary=</span>dico_quake))</span>
<span id="cb18-3"><a href="corpus-tagging.html#cb18-3"></a>qd<span class="op">$</span>quake&lt;-qd<span class="op">$</span>quake_nb<span class="op">&gt;</span><span class="dv">0</span></span>
<span id="cb18-4"><a href="corpus-tagging.html#cb18-4"></a><span class="kw">table</span>(qd<span class="op">$</span>quake,qd<span class="op">$</span>source)</span></code></pre></div>
<pre><code>##        
##         BEL_derheu BEL_lesoir FRA_figaro FRA_lmonde
##   FALSE       5648       7800       8880      15138
##   TRUE          88        128         66        191</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="corpus-tagging.html#cb20-1"></a><span class="kw">table</span>(qd<span class="op">$</span>quake_nb,qd<span class="op">$</span>source)</span></code></pre></div>
<pre><code>##    
##     BEL_derheu BEL_lesoir FRA_figaro FRA_lmonde
##   0       5648       7800       8880      15138
##   1         32         71         33         53
##   2         28         35         21        100
##   3         24         21         11         32
##   4          4          1          0          6
##   6          0          0          1          0</code></pre>
<p>We can have a look at the news that has collected the maximum number of keywords :</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="corpus-tagging.html#cb22-1"></a><span class="kw">texts</span>(qd[qd<span class="op">$</span>quake_nb<span class="op">&gt;</span><span class="dv">5</span>])</span></code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                                                                        text139605 
## &quot;L&#39;un des séismes les plus meurtriers depuis le tsunami de 2004. Le 26 décembre 2004, un tremblement de terre de magnitude 9,3 au large de l&#39;Indonésie, suivi d&#39;un énorme tsunami, faisait plus de 220.000 morts. Depuis, une dizaine de violentes secousses sismiques ont endeuillé plusieurs régions du globe.&quot;</code></pre>
<p>But we can also have a look at the salience of the topic by weeks :</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="corpus-tagging.html#cb24-1"></a>x&lt;-<span class="kw">tidy</span>(qd)</span>
<span id="cb24-2"><a href="corpus-tagging.html#cb24-2"></a>quake_time &lt;-<span class="st"> </span><span class="kw">tidy</span>(qd) <span class="op">%&gt;%</span></span>
<span id="cb24-3"><a href="corpus-tagging.html#cb24-3"></a><span class="st">              </span><span class="kw">mutate</span>(<span class="dt">week=</span><span class="kw">cut</span>(<span class="kw">as.Date</span>(date), <span class="st">&quot;weeks&quot;</span>))<span class="op">%&gt;%</span></span>
<span id="cb24-4"><a href="corpus-tagging.html#cb24-4"></a><span class="st">              </span><span class="kw">group_by</span>(source,week)<span class="op">%&gt;%</span></span>
<span id="cb24-5"><a href="corpus-tagging.html#cb24-5"></a><span class="st">              </span><span class="kw">summarise</span>(<span class="dt">newstot=</span><span class="kw">n</span>(),<span class="dt">quaktot=</span><span class="kw">sum</span>(quake), <span class="dt">quakpct=</span><span class="dv">100</span><span class="op">*</span>quaktot<span class="op">/</span>newstot) <span class="op">%&gt;%</span></span>
<span id="cb24-6"><a href="corpus-tagging.html#cb24-6"></a><span class="st">              </span><span class="kw">mutate</span>(<span class="dt">week =</span> <span class="kw">as.Date</span>(week))</span>
<span id="cb24-7"><a href="corpus-tagging.html#cb24-7"></a>  </span>
<span id="cb24-8"><a href="corpus-tagging.html#cb24-8"></a>p&lt;-<span class="kw">ggplot</span>(quake_time, <span class="kw">aes</span>(<span class="dt">x=</span>week,<span class="dt">y=</span>quakpct,<span class="dt">color=</span>source))<span class="op">+</span></span>
<span id="cb24-9"><a href="corpus-tagging.html#cb24-9"></a><span class="st">   </span><span class="kw">geom_line</span>()<span class="op">+</span></span>
<span id="cb24-10"><a href="corpus-tagging.html#cb24-10"></a><span class="st">   </span><span class="kw">scale_y_continuous</span>(<span class="st">&quot;% of news related to earthquakes&quot;</span>) <span class="op">+</span></span>
<span id="cb24-11"><a href="corpus-tagging.html#cb24-11"></a><span class="st">   </span><span class="kw">ggtitle</span>(<span class="st">&quot;Salience of earthquake topic in international RSS in 2015&quot;</span>)</span>
<span id="cb24-12"><a href="corpus-tagging.html#cb24-12"></a>p</span></code></pre></div>
<p><img src="newsbook_files/figure-html/quake2015-1.png" width="672" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="corpus-example.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ClaudeGrasland/newsbook/edit/master/22-corpus-tagging.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["newsbook.pdf", "newsbook.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
